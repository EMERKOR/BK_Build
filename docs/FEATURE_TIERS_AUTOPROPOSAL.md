# Ball_Knower v2.0 – Feature Tier Auto-Proposal Report

**Auto-generated by:** `tools/build_feature_tiers_autoproposal.py`

**Input:** `data/_feature_catalog_raw.csv`

**Output:** `data/_feature_tiers_autoproposed.csv`

---

## Overview

**Total Columns Analyzed:** 72

### Tier Distribution

- **T0_KEYS_STRUCTURE**: 21 columns (29.2%)
- **T1_TEAM_STRENGTH**: 12 columns (16.7%)
- **T2_MARKET**: 9 columns (12.5%)
- **T3_EXPERIMENTAL**: 10 columns (13.9%)
- **TX_FORBIDDEN**: 20 columns (27.8%)

### Leakage Risk by Tier

- **T0_KEYS_STRUCTURE**: low=21
- **T1_TEAM_STRENGTH**: low=12
- **T2_MARKET**: low=9
- **T3_EXPERIMENTAL**: medium=8, unknown=2
- **TX_FORBIDDEN**: high=20

---

## Tier 0 – Keys & Structure

**Purpose:** Identifier and structural columns needed for data organization.

**Usage:** Always allowed in all models (non-predictive).


**Count:** 21 columns

| Column Name | Role | Leakage | Reason |
|-------------|------|---------|--------|
| game_id | id_key | low | Role: id_key – structural/identifier column |
| season | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| week | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| home_team | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| away_team | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| team | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| stadium | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| surface | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| roof | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| is_playoff | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| is_neutral | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| game_date | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| day_of_week | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| home_rest_days | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| away_rest_days | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| temperature | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| wind_speed | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| precipitation | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| division_game | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| conference_game | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |
| primetime_game | pre_game_structure | low | Role: pre_game_structure – structural/identifier column |

---

## Tier 1 – Pre-Game Team Strength

**Purpose:** Long-term team strength indicators (Elo, power ratings, QBR, etc.).

**Usage:** Core predictors for v2.0 base model.


**Count:** 12 columns

| Column Name | Role | Leakage | Reason |
|-------------|------|---------|--------|
| home_elo_pre | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| away_elo_pre | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| home_qb_elo | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| away_qb_elo | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| home_power_rating | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| away_power_rating | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| home_qbr | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| away_qbr | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| home_strength_of_schedule | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| away_strength_of_schedule | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| coach_rating_home | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |
| coach_rating_away | pre_game_team_strength | low | Pre-game team strength metric (Elo, ratings, etc.) |

---

## Tier 2 – Pre-Game Market

**Purpose:** Market-derived features (spreads, totals, implied probabilities).

**Usage:** Can be used in v2.0 models; consider as separate feature set for A/B testing.


**Count:** 9 columns

| Column Name | Role | Leakage | Reason |
|-------------|------|---------|--------|
| spread_open | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| spread_close | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| total_open | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| total_close | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| home_ml_close | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| away_ml_close | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| home_implied_prob | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| away_implied_prob | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |
| consensus_spread | pre_game_market | low | Pre-game market data (spreads, totals, probabilities) |

---

## Tier 3 – Experimental / Ambiguous

**Purpose:** Columns with unclear role or medium leakage risk.

**Usage:** Requires manual human review before use in any model.


**Count:** 10 columns

| Column Name | Role | Leakage | Reason |
|-------------|------|---------|--------|
| home_wins | meta_misc | medium | Medium leakage risk – requires manual review |
| away_wins | meta_misc | medium | Medium leakage risk – requires manual review |
| home_losses | meta_misc | medium | Medium leakage risk – requires manual review |
| away_losses | meta_misc | medium | Medium leakage risk – requires manual review |
| rivalry_game | meta_misc | unknown | Role: meta_misc – needs human judgment |
| playoff_implications | unknown | unknown | Unknown role – classify manually after review |
| home_epa_lag1 | derived | medium | Medium leakage risk – requires manual review |
| away_epa_lag1 | derived | medium | Medium leakage risk – requires manual review |
| home_wins_last3 | derived | medium | Medium leakage risk – requires manual review |
| away_wins_last3 | derived | medium | Medium leakage risk – requires manual review |

---

## Tier X – Forbidden

**Purpose:** Post-game outcomes and high-leakage columns.

**Usage:** ❌ **NEVER USE IN PRE-GAME MODELS** – These columns leak the answer.


**Count:** 20 columns

| Column Name | Role | Leakage | Reason |
|-------------|------|---------|--------|
| off_epa_total | in_game_stats | high | High leakage risk – never use in pre-game models |
| off_success_rate | in_game_stats | high | High leakage risk – never use in pre-game models |
| off_epa_per_play | in_game_stats | high | High leakage risk – never use in pre-game models |
| def_epa_total | in_game_stats | high | High leakage risk – never use in pre-game models |
| def_success_rate | in_game_stats | high | High leakage risk – never use in pre-game models |
| def_epa_per_play | in_game_stats | high | High leakage risk – never use in pre-game models |
| off_plays | in_game_stats | high | High leakage risk – never use in pre-game models |
| off_pass_plays | in_game_stats | high | High leakage risk – never use in pre-game models |
| off_rush_plays | in_game_stats | high | High leakage risk – never use in pre-game models |
| home_score | post_game | high | High leakage risk – never use in pre-game models |
| away_score | post_game | high | High leakage risk – never use in pre-game models |
| margin | post_game | high | High leakage risk – never use in pre-game models |
| total_points | post_game | high | High leakage risk – never use in pre-game models |
| home_won | post_game | high | High leakage risk – never use in pre-game models |
| away_won | post_game | high | High leakage risk – never use in pre-game models |
| result | post_game | high | High leakage risk – never use in pre-game models |
| ats_outcome_home | post_game | high | High leakage risk – never use in pre-game models |
| ats_outcome_away | post_game | high | High leakage risk – never use in pre-game models |
| totals_outcome | post_game | high | High leakage risk – never use in pre-game models |
| home_covered | post_game | high | High leakage risk – never use in pre-game models |

---

## Recommendations

### ✅ Safe to Use (v2.0 Base Model)

- **Tier 0** (21 cols): Always include for structure
- **Tier 1** (12 cols): Core team strength predictors
- **Tier 2** (9 cols): Market features (optional, test separately)

### ⚠️ Requires Manual Review

- **Tier 3** (10 cols): Review each column individually
  - Check definitions and example values
  - Reclassify to appropriate tier or mark as forbidden

### ❌ Exclude from ALL Training

- **Tier X** (20 cols): Post-game outcomes and high-leakage data
  - Do not use these columns in any pre-game model
  - Keep for post-game analysis and validation only

---

## Next Steps

1. **Review Tier 3 columns** – Manually classify ambiguous features
2. **Validate Tier 1 columns** – Confirm all team strength features are pre-game only
3. **Test Tier 2 separately** – Run baseline model with/without market features
4. **Audit Tier X** – Double-check no post-game leakage in other tiers
5. **Update FEATURE_TIERS.md** – Create final authoritative tier map after review